<!DOCTYPE html>
<html>
<head>
  <title>Mise à jour Sereine</title>
</head>
  <style>
    .spinner_container {
     position: absolute;
      top: 45%;
      left: 45%;
    }
    
.spinner {
  animation: rotate 2s linear infinite;
  z-index: 2;
  position: absolute;
  top: 50%;
  left: 50%;
  margin: -25px 0 0 -25px;
  width: 50px;
  height: 50px;
  
  & .path {
    stroke: hsl(210, 70, 75);
    stroke-linecap: round;
    animation: dash 1.5s ease-in-out infinite;
  }
  
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }
  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}
    </style>
<body>
  Current version: <span id="version">vX.Y.Z</span>
  <div class="spinner_container">
  <svg class="spinner" viewBox="0 0 50 50">
  <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
</svg>
  </div>
  <h4>Progression du téléchargement de la MAJ</h4>
  <progress id="progress" max="100" value="0"> 70% </progress>
  <div id="messages"></div>
  
<script>
// Display the current version
let version = window.location.hash.substring(1);
document.getElementById('version').innerText = version;

// Listen for messages
const {ipcRenderer} = require('electron');
  ipcRenderer.on('progress', function(event, text) {
      console.log(event);
  console.log(text);
     var progress = document.getElementById('progress');
  progress.setAttribute('value', text)
  })
ipcRenderer.on('message', function(event, text) {
  console.log(event);
  console.log(text);
 
  var container = document.getElementById('messages');
  var message = document.createElement('div');
  message.innerHTML = text;
  container.appendChild(message);
})
</script>
</body>
</html>
